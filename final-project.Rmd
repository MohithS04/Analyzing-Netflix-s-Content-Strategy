---
title: "Analyzing Netflix's Content Strategy and Viewer Engagement Patterns"
subtitle: "MATH 40024/50024: Computational Statistics"
date: March 13, 2024
output: pdf_document

fontfamily: mathpazo
fontsize: 11pt
header-includes:
   - \linespread{1.05}
urlcolor: blue
---

__ACADEMIC INTEGRITY: Every student should complete the project by their own. A project report having high degree of similarity with work by any other student, or with any other document (e.g., found online) is considered plagiarism, and will not be accepted. The minimal consequence is that the student will receive the project score of 0, and the best possible overall course grade will be D. Additional consequences are described at http://www.kent.edu/policyreg/administrative-policy-regarding-student-cheating-and-plagiarism and will be strictly enforced.__

## Instruction

__Goal:__ The goal of the project is to go through the complete data analysis workflow to answer questions about your chosen topic using a real-world dataset. You will need to acquire the data, munge and explore the data, perform statistical analysis, and communicate the results.

__Report:__ Use this Rmd file as a template. Edit the file by adding your project title in the YAML, and including necessary information in the four sections: (1) Introduction, (2) Computational Methods, (3) Data Analysis and Results, and (4) Conclusion. 

__Submission:__ Please submit your project report as a PDF file (8-10 pages, flexible) to Canvas by __11:59 p.m. on May 5, 2024__. The PDF file should be generated by "knitting" the Rmd file. You may choose to first generate an HTML file (by changing the output format in the YAML to `output: html_document`) and then convert it to PDF. Word documents, however, cannot be used as an intermediate file (and of course, the submitted file). __20 points will be deducted if the submitted files are in wrong format.__ 

__Grade:__ The project will be graded based on your ability to (1) recognize and define research questions suitable for data-driven, computational approaches, (2) use computational methods to analyze data, (3) appropriately document the process (with R code) and clearly present the results, and (4) draw valid conclusions supported by the data analysis.

__Example topics:__

* [Post-Hurricane Vital Statistics](https://www.biorxiv.org/content/10.1101/407874v2)
* [Tidy Tuesday](https://github.com/rfordatascience/tidytuesday)

__Datasets:__ I suggest to work on a dataset with at least thousands of observations and dozens of variables. You may consider (but are not restricted) to use the following data repositories: [Data.gov](https://catalog.data.gov/dataset), [Kaggle](https://www.kaggle.com/datasets), [FiveThirtyEight](https://data.fivethirtyeight.com/), [ProPublica](https://www.propublica.org/datastore/datasets), and [UCI Machine Learning Repository](https://archive.ics.uci.edu/ml/index.php)

\pagebreak

## Introduction [15 points]

The way we consume entertainment has changed significantly in the age of digital streaming, and Netflix was a driving force behind this transition, building an enormous collection of series and films that appeal to a wide range of international interests. The thorough examination of Netflix's selections sheds light on both the changing tastes of viewers and more general patterns in the creation and dissemination of media. In light of this, the project's goal is to investigate several research issues that probe the workings of Netflix's content strategy and its consequences for diversity and viewer engagement.

* What research question(s) would you like to answer?

1.  How does the genre distribution of Netflix's offerings vary across different countries? The question at hand aims to comprehend the variety of genres offered in various locations, taking into account regional preferences and Netflix's approach to content localization.

2.  What is the relationship between the release year of content and its availability on Netflix? In order to provide light on Netflix's approach to appealing to nostalgia while being up to date, this will examine how the streaming service divides its film library between new releases and classics.

3.  Does the length of movies and shows correlate with their popularity and viewer ratings on Netflix? Duration and its effect on viewer preferences can be analyzed to see whether longer or shorter forms are generally more successful.

* Why a data-driven, computational approach may be useful to answer the questions?

Dealing with these questions thus calls for a data driven strategy, as it enables the examination of large data sets without bias, thus making it possible to understand patterns and tendencies that cannot be recognized through human senses. Managing complex data comprising numerous factors, like those offered by Netflix, is made possible through computational methods.

These datasets encompass metadata on various aspects, including director, cast, nation, release year, rating, and genre, among others. Computational statistics allows us to utilize quantitative methods to examine hypotheses regarding content strategy and audience behavior, draw significant inferences, and even forecast future trends.

Moreover, the utilization of computational tools in data analysis facilitates the implementation of machine learning models and statistical techniques to evaluate the associations and connections among various data points. This methodology not only improves the precision of the results but also offers a scalable method for analyzing data as the dataset expands with the inclusion of new material to the platform.

* Describe the dataset that you choose. 

The dataset selected for this investigation is an extensive compilation of data from Netflix, encompassing intricate metadata about the series and movies accessible on the platform as of November 2019. The dataset comprises many entries, each of which contains the following attributes:

-   Show ID: An exclusive identification for each title.

-   Title: The official name of the television show or film.

-   Director: The individual or individuals responsible for overseeing the production of the film or series.

-   Cast: Main performers featured in the film or series.

-   Country: The nation or nations in which the film or television show was created.

-   Date Added: The specific date when the title was included in Netflix's collection.

-   Release Year: The year of the title's first release.

-   Rating: The age certification or viewer rating assigned to the title.

-   Duration: The duration of the show or movie, indicated in minutes for movies and seasons for TV shows.

-   Listed in: The specific genre(s) in which the title is listed on Netflix.

-   Description: A concise overview of the title.

This dataset is well-suited for the project as it offers a diverse range of factors that can be examined to address the research inquiries. The incorporation of many characteristics such as country, genre, and release year enables a comprehensive examination of how distinct aspects impact the accessibility and appeal of content on Netflix. By utilizing this dataset, we may conduct various exploratory and inferential statistical studies to reveal insights about the distribution of content, viewer preferences, and strategic placement of content.

If you dissect the data, you can predict a few patterns within the streaming realm henceforth. Using the data set alongside computational statistical methods, one can fully analyze NetFlix’s content strategy. The same analysis will offer insights into how best the company steers its media consumption policy in the digital world, whose status changes ever more.

```{r}
# Load necessary libraries
library(tidyverse)
library(caret)
library(nnet)  
library(cluster) 
# Load the dataset
setwd("C:\\Users\\mohit\\OneDrive\\Documents\\KENT SPRING 2K24 INTAKE\\SEM-1 COMPUTATIONAL STATISTICS\\Project") 
netflix_data <- read.csv("netflix_titles_nov_2019.csv")
head(netflix_data)
```
```{r}
str(netflix_data)
```


## Computational Methods [30 points]

Examining an extensive dataset like the collection of Netflix shows and movies necessitates careful data preparation, thorough exploratory analysis, and the use of suitable modeling tools to successfully address the research topics at hand. Here, we provide a comprehensive outline of the essential procedures and approaches that will be utilized in this project.
```{r}
# Handling missing values
netflix_data <- netflix_data |> 
  mutate(
    director = replace_na(director, "Unknown"),
    cast = replace_na(cast, "Unknown"),
    country = replace_na(country, "Unknown")
  )

# Convert date_added to Date format
netflix_data$date_added <- mdy(netflix_data$date_added)

# Splitting 'listed_in' into separate genres and creating a tidy dataset
netflix_data_tidy <- netflix_data |> 
  separate_rows(listed_in, sep = ",\\s*")

# Creating a year_added column
netflix_data$year_added <- year(netflix_data$date_added)
```

* For the choosen dataset, what are the necessary data wrangling steps to make the data ready for subsequent analyses?

These observations can thereafter be utilized to construct well-informed forecasts regarding forthcoming patterns in the streaming media domain. By utilizing this dataset and employing computational statistical methods, a comprehensive analysis of Netflix's content strategy can be conducted. This analysis will provide valuable insights into how the company effectively manages the diverse global preferences and the ever-changing landscape of digital media consumption.

```{r}
# Preparing data: Counting number of titles per country and selecting top 5 countries
top_countries <- netflix_data |> 
  count(country, sort = TRUE) |> 
  top_n(5, n)

# Filtering data for only top countries and counting genres
genre_counts <- netflix_data |> 
  filter(country %in% top_countries$country) |> 
  separate_rows(listed_in, sep = ",\\s*") |> 
  count(country, listed_in)

# Plotting the data
ggplot(genre_counts, aes(x = reorder(listed_in, -n), y = n, fill = country)) +
  geom_bar(stat = "identity") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1), 
        legend.title = element_blank(),
        plot.title = element_blank())

```
## Genre Distribution Across Top Countries

The bar chart depicts the allocation of genres among the leading content-producing countries, namely India, Japan, UK, and USA. Notable observations indicate that India and Japan have specific tastes for various genres that differ from those of the United States and the United Kingdom. The genre distribution in the United States is more diverse, indicating a wider international audience. The impact of culture is apparent, as seen in the widespread popularity of anime in Japan.

* What exploratory analyses and modeling techniques can be used to answer the research questions?

After the data has been cleaned and prepared, we will proceed to apply the following exploratory and modeling techniques:

1.  Descriptive Statistics: Calculate basic statistical measures for continuous variables like average, middle value, most repeating number, distance between highest and lowest values as well as dispersion around about average or mean (standard deviations). Moreover, you need to discover how often each category occurs regarding discrete variables. In so doing one is bound to get more understanding on how data are dispersed and centered towards some particular values.
2.  Utilize a range of graphical representations such as histograms, box plots, bar charts, and scatter plots to visually analyze and investigate the data. These representations facilitate the identification of patterns, outliers, and the correlation between variables.
3.  Conduct a correlation analysis to ascertain the correlation coefficients between numerical variables to find potential relationships that may impact content popularity and audience preferences.
4.  Conduct an extensive examination of the genres included in the dataset to ascertain their frequency in various nations and their temporal patterns.
5.  Predictive Modeling: Regression analysis, either linear or logistic, may be employed based on the specific research inquiries. For instance, forecasting the level of popularity by considering factors such as duration, release year, and genre.
6.  Utilize clustering techniques to locate clusters of similar titles or viewer preferences in order to do association analysis. Association rules can be utilized to identify frequent combinations of elements that co-occur in popular titles.

* What metrics will be used to evaluate the quality of the data analysis?

The assessment of the analytical models and methodologies will rely on several metrics, customized to suit the unique sorts of analysis:

• Accuracy and precision are crucial measures for predictive models, particularly when the outcome is categorical.

• R-squared and RMSE are among the statistical measures that evaluate the precision levels together with the predictive capability possessed by regression models. R-squared illustrates the portion of the dependent variable’s variance that is explainable by the independent variables; on the other hand, RMSE indicates mean deviation of forecasts from observed data. This means helps in understanding how well this model captures information from the data while also helping us predict what will happen next.

• Model selection is done by using the Akaike Information Criterion (AIC) and the Bayesian Information Criterion (BIC), which allow for comparison of multiple models in order to choose the best model by considering both fit quality and complexity.

• Visualization Evaluation: The efficacy of visualizations will be assessed based on their clarity, precision, and capacity to communicate the appropriate insights to the audience.
```{r}
# Trend of content addition over the years
netflix_data |> 
  filter(!is.na(year_added)) |> 
  count(year_added, sort = TRUE) |> 
  ggplot(aes(x = year_added, y = n)) +
  geom_line() +
  labs(title = "Trend of Content Addition Over the Years", x = "Year Added", y = "Number of Titles")
```
## Trend of Content Addition Over the Years

The line graph illustrates a substantial surge in the number of titles incorporated into Netflix after the year 2015. The increase in popularity can be attributed to Netflix's increased allocation of resources towards producing original content and its deliberate move towards establishing itself as a leading worldwide content provider. The exponential growth mentioned here corresponds to the rapid increase in digital streaming services and the simultaneous decrease in traditional media channels.

## Data Analysis and Results [40 points]

* Perform data analysis, document the analysis procedure, and evaluate the outcomes.
```{r}
# Assuming a simple metric for popularity based on the presence of a high rating
# First, we'll need a categorization of duration for better visualization and analysis
netflix_data <- netflix_data |> 
  mutate(duration_category = case_when(
    str_detect(duration, "min") & as.numeric(str_extract(duration, "\\d+")) <= 90 ~ "Short",
    str_detect(duration, "min") & as.numeric(str_extract(duration, "\\d+")) > 90 & as.numeric(str_extract(duration, "\\d+")) <= 150 ~ "Medium",
    str_detect(duration, "Season") ~ "Series",
    TRUE ~ "Long"
  ))

# Plotting
netflix_data |> 
  ggplot(aes(x = duration_category, fill = rating)) +
  geom_bar(position = "fill") +
  labs(title = "Duration Category vs. Viewer Rating", x = "Duration Category", y = "Proportion")


```
## Duration Category vs. Viewer Rating

The stacked bar chart comparing content duration versus viewer ratings reveals that there is a correlation between longer duration content, such as films, and more mature ratings, such as R and TV-MA. This suggests a trend where longer formats may be specifically targeting an older demographic. Series, irrespective of their length, consistently garner diverse ratings, signifying their broad appeal among different age demographics.

```{r}
# Analyzing Release Year Trends by Country

# Filter top 5 countries for clarity
top_countries_release <- netflix_data |> 
  filter(country %in% top_countries$country) |> 
  count(country, release_year) |> 
  group_by(country) |> 
  summarise(avg_release_year = mean(release_year, na.rm = TRUE))

# Plotting average release year by country
ggplot(top_countries_release, aes(x = country, y = avg_release_year, fill = country)) +
  geom_col() +
  theme_minimal() +
  labs(x = "Country", y = "Average Release Year", title = "Average Release Year of Netflix Content by Country")




```
```{r}
# Exploring Relationship Between Duration and Popularity

# duration in minutes is already cleaned and converted
netflix_data$duration_min <- as.numeric(gsub(" min", "", netflix_data$duration))

# Grouping data by rating and calculating average duration
rating_duration <- netflix_data |> 
  filter(!is.na(duration_min)) |> 
  group_by(rating) |> 
  summarise(avg_duration = mean(duration_min, na.rm = TRUE))

# Plotting
ggplot(rating_duration, aes(x = rating, y = avg_duration, fill = rating)) +
  geom_col() +
  theme_minimal() +
  labs(x = "Rating", y = "Average Duration (minutes)", title = "Average Duration vs. Rating")



```
## Average Duration vs. Rating

The bar chart illustrates a correlation between average duration and ratings, indicating that content with NC-17 and TV-MA ratings tends to have longer duration. This may suggest that these shows possess a greater narrative complexity, which appeals to adult viewers. In contrast, films with family-friendly ratings such as G and PG tend to have shorter average lengths, which is believed to be in line with the lower attention spans of younger audiences.


* Present the data analysis results.
```{r}
# Convert 'rating' into a binary popularity indicator (popular vs. not popular)
netflix_data$popular <- ifelse(netflix_data$rating %in% c('TV-MA', 'R'), 1, 0)  # Assuming mature content is more popular

# Handling missing values
netflix_data$duration <- as.numeric(gsub(" min", "", netflix_data$duration, ignore.case = TRUE))
netflix_data <- netflix_data |> 
  filter(!is.na(duration)) |> 
  filter(!is.na(release_year))

# Create dummy variables for genre
netflix_data <- netflix_data %>% 
  separate_rows(listed_in, sep = ",\\s*") %>% 
  mutate(listed_in = as.factor(listed_in)) %>% 
  cbind(., model.matrix(~listed_in + 0, data = .))

# Split data into training and testing sets
set.seed(123)
training_indices <- createDataPartition(netflix_data$popular, p = 0.8, list = FALSE)
train_data <- netflix_data[training_indices, ]
test_data <- netflix_data[-training_indices, ]

```
```{r}
# Train the logistic regression model
popular_model <- glm(popular ~ duration + release_year + listed_in, data = train_data, family = binomial())

# Model summary
summary(popular_model)

# First, we need to check for missing data in the predictors used by the model
if(sum(is.na(test_data)) > 0){
  warning("There are only missing values in your test data; these will be removed for prediction.")
  test_data <- na.omit(test_data)
}
# Predict on test data
predictions <- predict(popular_model, test_data, type = "response")
predicted_classes <- ifelse(predictions > 0.5, 1, 0)

# Evaluate the model
confusion_matrix <- table(Predicted = predicted_classes, Actual = test_data$popular)
confusionMatrix(confusion_matrix)


```

```{r}
# K-Means Clustering
# Standardize features
scaled_data <- scale(train_data[, c("duration", "release_year")])

# Compute k-means clustering
set.seed(123)
kmeans_result <- kmeans(scaled_data, centers = 3, nstart = 25)

# Analyze cluster output
table(kmeans_result$cluster, train_data$popular)


```


## Conclusion [15 points]

## Predictive Modeling of Popularity

The logistic regression output reveals that both the duration and release year of a title are significant determinants of its popularity. Specifically, recent years and moderate durations tend to favor popularity. Based on the model coefficients, genres such as Independent Movies, International Movies, and Dramas are more likely to be popular, whereas genres like Children & Family Movies and Faith & Spirituality are less likely to be popular.

## Clustering Analysis

The K-means clustering algorithm has successfully identified clusters based on the variables of duration and release year. The analysis has revealed that one of the clusters may represent contemporary content with shorter durations, which is highly favored by viewers. Another cluster indicates the presence of older, potentially lengthier content that may not precisely correspond to current popular preferences.

## Statistical Evaluation and Model Accuracy

The confusion matrix of the popularity prediction model demonstrates a reasonable level of accuracy, roughly 65.27%, with a favorable sensitivity rate but a lower specificity. This indicates that the model demonstrates greater proficiency in recognizing popular titles compared to non-popular ones, which may be indicative of an imbalance or the inherent intricacy involved in predicting content popularity.

## Overall Interpretation

The investigations offer extensive insights into how Netflix customizes its content for various regions, adjusts to evolving viewer preferences, and strategically positions its content collection to optimize viewer engagement. Predictive modeling and clustering techniques enable strategic decision-making in content management and development, leading to improved popularity and audience satisfaction. These interpretations provide a subtle and detailed comprehension of Netflix's content strategy and audience preferences, providing vital data for strategic planning and market positioning.

## Conclusion


The extensive analysis of the Netflix dataset has yielded wise responses to the study inquiries put forth: The investigation has unequivocally demonstrated the variation in genre distribution among different countries. As an illustration, the United States exhibits a broader range of genres than countries such as Japan, which has an apparent inclination towards specific genres like anime. Netflix customizes its programming according to regional preferences and cultural peculiarities.

Evolution of Content Expansion Over Time: The trend study disclosed a noteworthy surge in titles incorporated into Netflix's library, particularly after 2015. This is consistent with Netflix's strategic shift towards becoming a prominent content provider, with a focus on creating original productions.

The investigation revealed a positive correlation between the duration of the material and its popularity. Longer content tends to obtain higher ratings from mature audiences and is more likely to be popular among adults. This suggests strategically placing content of varying durations can cater to different viewing demographics.
